import{a as He,c as Pe}from"./index-u9Y9Mn5l.js";import{r as Ve}from"./froala_editor.min-B-XFsicV.js";function je(ee,te){for(var b=0;b<te.length;b++){const L=te[b];if(typeof L!="string"&&!Array.isArray(L)){for(const P in L)if(P!=="default"&&!(P in ee)){const e=Object.getOwnPropertyDescriptor(L,P);e&&Object.defineProperty(ee,P,e.get?e:{enumerable:!0,get:()=>L[P]})}}}return Object.freeze(Object.defineProperty(ee,Symbol.toStringTag,{value:"Module"}))}var Xe={exports:{}};/*!
 * froala_editor v4.5.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2025 Froala Labs
 */(function(ee,te){(function(b,L){L(Ve())})(Pe,function(b){function L(e,d){(d==null||d>e.length)&&(d=e.length);for(var u=0,D=Array(d);u<d;u++)D[u]=e[u];return D}function P(e){return function(u){if(Array.isArray(u))return L(u)}(e)||function(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}(e)||function(u,D){if(u){if(typeof u=="string")return L(u,D);var N={}.toString.call(u).slice(8,-1);return N==="Object"&&u.constructor&&(N=u.constructor.name),N==="Map"||N==="Set"?Array.from(u):N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N)?L(u,D):void 0}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}b=b&&b.hasOwnProperty("default")?b.default:b,Object.assign(b.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_][_CUSTOM_COLOR_]"}),Object.assign(b.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableFooter","tableRemove","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableDefaultWidth:"100%",tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,keepTextFormatOnTable:!1,tableInsertHelperOffset:15}),b.PLUGINS.table=function(e){var d,u,D,N,K,Z,V,h=e.$,S={};function k(){var r=M();if(r){var a=e.popups.get("table.edit");if(a||(a=ce()),a){e.popups.setContainer("table.edit",e.$sc);var l=Ee(r),t=l.left+(l.right-l.left)/2,o=l.bottom;e.popups.show("table.edit",t,o,l.bottom-l.top,!0),e.edit.isDisabled()&&(e.$el.removeClass("fr-no-selection"),e.edit.on(),e.button.bulkRefresh(),e.selection.setAtEnd(e.$el.find(".fr-selected-cell").last().get(0)),e.selection.restore())}}}function ie(){var r=M();if(r){var a=e.popups.get("table.colors");a||(a=function(){var c="";0<e.opts.tableColorsButtons.length&&(c='<div class="fr-buttons fr-tabs">'.concat(e.button.buildList(e.opts.tableColorsButtons),"</div>"));var f="";e.opts.colorsHEXInput&&(f='<div class="fr-color-hex-layer fr-table-colors-hex-layer fr-active fr-layer" id="fr-table-colors-hex-layer-'.concat(e.id,'"><div class="fr-input-line"><input maxlength="7" id="fr-table-colors-hex-layer-text-').concat(e.id,'" type="text" placeholder="').concat(e.language.translate("HEX Color"),'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="tableCellBackgroundCustomColor" tabIndex="2" role="button">').concat(e.language.translate("OK"),"</button></div></div>"));var i={buttons:c,colors:function(){for(var C='<div class="fr-color-set fr-table-colors">',v=0;v<e.opts.tableColors.length;v++)v!==0&&v%e.opts.tableColorsStep==0&&(C+="<br>"),e.opts.tableColors[v]!="REMOVE"?C+='<span class="fr-command" style="background: '.concat(e.opts.tableColors[v],';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="').concat(e.opts.tableColors[v],'"><span class="fr-sr-only">').concat(e.language.translate("Color")," ").concat(e.opts.tableColors[v],"&nbsp;&nbsp;&nbsp;</span></span>"):C+='<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'.concat(e.language.translate("Clear Formatting"),'">').concat(e.icon.create("tableColorRemove"),'<span class="fr-sr-only">').concat(e.language.translate("Clear Formatting"),"</span></span>");return C+="</div>"}(),custom_color:f},n=e.popups.create("table.colors",i);return e.events.$on(e.$wp,"scroll.table-colors",function(){e.popups.isVisible("table.colors")&&ie()}),function(C){e.events.on("popup.tab",function(v){var g=h(v.currentTarget);if(!e.popups.isVisible("table.colors")||!g.is("span"))return!0;var m=v.which,y=!0;if(b.KEYCODE.TAB==m){var w=C.find(".fr-buttons");y=!e.accessibility.focusToolbar(w,!!v.shiftKey)}else if(b.KEYCODE.ARROW_UP==m||b.KEYCODE.ARROW_DOWN==m||b.KEYCODE.ARROW_LEFT==m||b.KEYCODE.ARROW_RIGHT==m){var $=g.parent().find("span.fr-command"),x=$.index(g),E=e.opts.colorsStep,O=Math.floor($.length/E),_=x%E,H=Math.floor(x/E),F=H*E+_,z=O*E;b.KEYCODE.ARROW_UP==m?F=((F-E)%z+z)%z:b.KEYCODE.ARROW_DOWN==m?F=(F+E)%z:b.KEYCODE.ARROW_LEFT==m?F=((F-1)%z+z)%z:b.KEYCODE.ARROW_RIGHT==m&&(F=(F+1)%z);var se=h($.get(F));e.events.disableBlur(),se.focus(),y=!1}else b.KEYCODE.ENTER==m&&(e.button.exec(g),y=!1);return y===!1&&(v.preventDefault(),v.stopPropagation()),y},!0)}(n),n}()),e.popups.setContainer("table.colors",e.$sc);var l=Ee(r),t=(l.left+l.right)/2,o=l.bottom;(function(){var c=e.popups.get("table.colors"),f=e.$el.find(".fr-selected-cell").first(),i=e.helpers.RGBToHex(f.css("background-color")),n=c.find(".fr-table-colors-hex-layer input");c.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"),c.find('span[data-param1="'.concat(i,'"]')).addClass("fr-selected-color fr-active-item"),n.val(i).trigger("change")})(),e.popups.show("table.colors",t,o,l.bottom-l.top,!0)}}function Me(){T().length===0&&e.toolbar.enable()}function fe(r){if(r)return e.popups.onHide("table.insert",function(){e.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseover")}),!0;var a="";0<e.opts.tableInsertButtons.length&&(a='<div class="fr-buttons fr-tabs">'.concat(e.button.buildList(e.opts.tableInsertButtons),"</div>"));var l={buttons:a,rows_columns:function(){for(var s='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',c=1;c<=e.opts.tableInsertMaxSize;c++){for(var f=1;f<=e.opts.tableInsertMaxSize;f++){var i="inline-block";2<c&&!e.helpers.isMobile()&&(i="none");var n="fr-table-cell ";c==1&&f==1&&(n+=" hover"),s+='<span class="fr-command '.concat(n,'" tabIndex="-1" data-cmd="tableInsert" data-row="').concat(c,'" data-col="').concat(f,'" data-param1="').concat(c,'" data-param2="').concat(f,'" style="display: ').concat(i,';" role="button"><span></span><span class="fr-sr-only">').concat(c," &times; ").concat(f,"&nbsp;&nbsp;&nbsp;</span></span>")}s+='<div class="new-line"></div>'}return s+="</div></div>"}()},t=e.popups.create("table.insert",l);return e.events.$on(t,"mouseover",".fr-table-size .fr-select-table-size .fr-table-cell",function(o){ae(h(o.currentTarget))},!0),function(s){e.events.$on(s,"focus","[tabIndex]",function(c){var f=h(c.currentTarget);ae(f)}),e.events.on("popup.tab",function(c){var f=h(c.currentTarget);if(!e.popups.isVisible("table.insert")||!f.is("span, a"))return!0;var i,n=c.which;if(b.KEYCODE.ARROW_UP==n||b.KEYCODE.ARROW_DOWN==n||b.KEYCODE.ARROW_LEFT==n||b.KEYCODE.ARROW_RIGHT==n){if(f.is("span.fr-table-cell")){var p=f.parent().find("span.fr-table-cell"),C=p.index(f),v=e.opts.tableInsertMaxSize,g=C%v,m=Math.floor(C/v);b.KEYCODE.ARROW_UP==n?m=Math.max(0,m-1):b.KEYCODE.ARROW_DOWN==n?m=Math.min(e.opts.tableInsertMaxSize-1,m+1):b.KEYCODE.ARROW_LEFT==n?g=Math.max(0,g-1):b.KEYCODE.ARROW_RIGHT==n&&(g=Math.min(e.opts.tableInsertMaxSize-1,g+1));var y=m*v+g,w=h(p.get(y));ae(w),e.events.disableBlur(),w.focus(),i=!1}}else b.KEYCODE.ENTER==n&&(e.button.exec(f),i=!1);return i===!1&&(c.preventDefault(),c.stopPropagation()),i},!0)}(t),t}function ae(r){var a=r.data("row");a!==null&&(a=parseInt(a));var l=r.data("col");l!==null&&(l=parseInt(l));var t=r.parent();t.siblings(".fr-table-size-info").html("".concat(a," &times; ").concat(l)),t.find("> span").removeClass("hover fr-active-item");for(var o=1;o<=e.opts.tableInsertMaxSize;o++)for(var s=0;s<=e.opts.tableInsertMaxSize;s++){var c=t.find('> span[data-row="'.concat(o,'"][data-col="').concat(s,'"]'));o<=a&&s<=l?c.addClass("hover"):o<=a+1||o<=2&&!e.helpers.isMobile()?c.css("display","inline-block"):2<o&&!e.helpers.isMobile()&&c.css("display","none")}r.addClass("fr-active-item")}function ce(r){if(r)return e.popups.onHide("table.edit",Me),!0;if(0<e.opts.tableEditButtons.length){var a={buttons:'<div class="fr-buttons">'.concat(e.button.buildList(e.opts.tableEditButtons),"</div>")},l=e.popups.create("table.edit",a);return e.events.$on(e.$wp,"scroll.table-edit",function(){e.popups.isVisible("table.edit")&&k()}),l}return!1}function Ie(){S[e.id]||(S[e.id]=h(document.createElement("div")).attr("class","fr-table-selector").html('<a role="button" tabIndex="-1" title="'.concat(e.language.translate("Select Table"),'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="').concat(b.SVG.tableSelectorIcon,'"/></svg></a>')));var r=e.language.translate(`The content you are pasting does not contain a table.
Please ensure the copied content is in table format.`);e.events.on("paste.before",function(t,o){if(e.$el.find("table.fr-table-selected").length){var s=o||t&&t.clipboardData;if(s&&s.items){var c=(s||window.clipboardData).getData("text/html")||"";if(!c||c.indexOf("<table")===-1)return alert(r),t.preventDefault(),t.stopPropagation(),!1}}return!0}),e.events.on("html.beforeInsert",function(t){var o=e.$el.find("table.fr-table-selected");if(o.length){var s=function(f){var i=e.doc.createElement("div");i.innerHTML=f;for(var n=i.firstChild;n;){var p=n.nextSibling;(n.nodeType===Node.TEXT_NODE&&n.textContent.replace(/\u200b/g,"").trim()===""||n.nodeType===Node.COMMENT_NODE||n.tagName==="SPAN"&&n.textContent.replace(/\u200b/g,"").trim()==="")&&n.remove(),n=p}return i.childNodes.length===1&&i.childNodes[0].tagName==="TABLE"&&i.childNodes[0]}(t);return s?(function(f,i){for(var n=i.get(0),p=n.rows[0].cells[0],C=p&&p.parentNode?p.parentNode.rowIndex:0,v=p?p.cellIndex:0,g=n.rows,m=f.rows,y=0;y<f.rows.length;y++){if(!g[C+y])for(var w=g[g.length-1].cells.length,$=n.insertRow(),x=0;x<w;x++)$.insertCell();for(var E=g[C+y],O=0;O<f.rows[y].cells.length;O++){if(!E.cells[v+O])for(var _=0;_<g.length;_++)g[_].insertCell();var H=E.cells[v+O],F=m[y].cells[O];H.outerHTML=F.outerHTML}}}(s,o),e.keys.positionCaret(),e.events.trigger("html.inserted")):alert(r),!1}return!0}),e.events.on("mousedown",function(){J()}),e.events.$on(h(e.o_win),"resize",function(){var t=e.$el.find("table.fr-table-selected");t.length?$e(t):J()}),e.events.on("commands.undo commands.redo commands.before",function(){J()});var a=null,l=null;e.events.on("snapshot.before",function(){l=e.$el.find("table.fr-table-selection-hover"),a=e.$el.find("table.fr-table-selected"),l.removeClass("fr-table-selection-hover"),a.removeClass("fr-table-selected")}),e.events.on("snapshot.after",function(){a&&a.addClass("fr-table-selected"),l&&l.addClass("fr-table-selection-hover")}),e.events.$on(S[e.id],"click",function(){var t=e.$el.find("table.fr-table-selection-hover");if(t.length){e.$el.find("table.fr-table-selected").removeClass("fr-table-selected"),S[e.id].addClass("fr-table-selector-active-selected"),t.addClass("fr-table-selected"),t.removeClass("fr-table-selection-hover");var o=e.doc.createRange();e.selection.get().removeAllRanges(),o.setStart(t.get(0),0),o.setEnd(t.get(0),0),e.selection.get().addRange(o),e.$el.focus()}}),e.events.on("destroy",function(){J(),S[e.id]=null})}function de(r){var a={startTag:"",closeTag:""};return e.opts.keepTextFormatOnTable&&(a=pe(function(t){for(var o=new Set,s=t.textContent,c=0,f=[t.firstChild];0<f.length;){var i=f.pop();if(i&&(o.has(i)||(c===0&&s!==i.textContent&&(s=i.textContent,c++),o.add(i)),i.hasChildNodes()))for(var n=0;n<i.childNodes.length;){if(i.childNodes[n].nodeType===3)return P(o);if(i.childNodes[n].textContent){if(c===0&&i.childNodes[n].textContent!==s){s=i.childNodes[n].textContent,f.push(i.childNodes[n]),c++;break}i.childNodes[n].textContent===s&&f.push(i.childNodes[n])}n++}}return P(o)}(r).reverse())),{startTag:a.startTag,closeTag:a.closeTag}}function pe(r){var a="",l="",t=["br","#text","#comment","font"];if(0<r.length)for(var o=r.length-1;0<=o;o--){var s=r[o],c=e.node.isBlock(s),f=t.indexOf(s.nodeName.toLowerCase());if(!c&&f<0){var i=s.style,n="";if(i&&i.length){for(var p=0;p<i.length;p++)n+=i[p]+": "+i[i[p]].replace(/"/gi,"")+"; ";n=n.trim()}a+=n?"<"+s.nodeName.toLowerCase()+' style="'+n+'">':"<"+s.nodeName.toLowerCase()+">",l="</"+s.nodeName.toLowerCase()+">"+l}}return{startTag:a,closeTag:l}}function Q(){if(0<T().length){var r=A();e.selection.setBefore(r.get(0))||e.selection.setAfter(r.get(0)),e.selection.restore(),e.popups.hide("table.edit"),e.opts.trackChangesEnabled?(e.track_changes.removedTable(r),I()):r.remove(),e.toolbar.enable()}}function he(r){var a=A();if(0<a.length){if(0<e.$el.find("thead .fr-selected-cell").length&&r=="above"||0<e.$el.find("tfoot td.fr-selected-cell").length&&r=="below")return;var l,t,o,s=M(),c=U(s);if(c==null)return;t=r=="above"?c.min_i:c.max_i;var f="<tr>";for(l=0;l<s[t].length;l++)if(r=="below"&&t<s.length-1&&s[t][l]==s[t+1][l]||r=="above"&&0<t&&s[t][l]==s[t-1][l]){if(l===0||0<l&&s[t][l]!=s[t][l-1]){var i=h(s[t][l]);i.attr("rowspan",parseInt(i.attr("rowspan"),10)+1)}}else{var n=h(s[t][l]);if(n.attr("tagName").toUpperCase()=="TH")f+='<th style="'+n.attr("style")+'" ><br></th>';else{var p=de(s[t][l]);f+='<td style="'+n.attr("style")+'" >'+p.startTag+"<br>"+p.closeTag+"</td>"}}f+="</tr>",o=0<e.$el.find("thead .fr-selected-cell").length&&r=="below"||0<e.$el.find("tfoot td.fr-selected-cell").length&&r=="above"?h(a.find("tbody").not(a.find("> table tbody"))):h(a.find("tr").not(a.find("> table tr")).get(t)),r=="below"?o.attr("tagName")=="TBODY"?o.prepend(f):o[0].parentNode&&o[0].insertAdjacentHTML("afterend",f):r=="above"&&(o.attr("tagName")=="TBODY"?o.append(f):o.before(f),e.popups.isVisible("table.edit")&&k())}}function ue(r,a,l){var t,o,s,c,f,i=0,n=M(l);if(r<(a=Math.min(a,n[0].length-1))){for(o=r;o<=a;o++)if(!(r<o&&n[0][o]==n[0][o-1])&&1<(c=Math.min(parseInt(n[0][o].getAttribute("colspan"),10)||1,a-r+1))&&n[0][o]==n[0][o+1]){for(i=c-1,t=1;t<n.length;t++)if(n[t][o]!=n[t-1][o]){for(s=o;s<o+c;s++)if(n[t][s]!==void 0){if(1<(f=parseInt(n[t][s].getAttribute("colspan"),10)||1)&&n[t][s]==n[t][s+1])s+=i=Math.min(i,f-1);else if(!(i=Math.max(0,i-1)))break}if(!i)break}}}i&&ge(n,i,"colspan",0,n.length-1,r,a)}function be(r,a,l){var t,o,s,c,f,i=0,n=M(l);if(r<(a=Math.min(a,n.length-1))){for(t=r;t<=a;t++)if(!(r<t&&n[t][0]==n[t-1][0])&&n[t][0]!==void 0&&1<(c=Math.min(parseInt(n[t][0].getAttribute("rowspan"),10)||1,a-r+1))&&n[t][0]==n[t+1][0]){for(i=c-1,o=1;o<n[0].length;o++)if(n[t][o]!=n[t][o-1]){for(s=t;s<t+c;s++)if(n[s][o]!==void 0){if(1<(f=parseInt(n[s][o].getAttribute("rowspan"),10)||1)&&n[s][o]==n[s+1][o])s+=i=Math.min(i,f-1);else if(!(i=Math.max(0,i-1)))break}if(!i)break}}}i&&ge(n,i,"rowspan",r,a,0,n[0].length-1)}function ge(r,a,l,t,o,s,c){var f,i,n;for(f=t;f<=o;f++)for(i=s;i<=c;i++)t<f&&r[f][i]==r[f-1][i]||s<i&&r[f][i]==r[f][i-1]||r[f][i]!==void 0&&1<(n=parseInt(r[f][i].getAttribute(l),10)||1)&&(1<n-a?r[f][i].setAttribute(l,n-a):r[f][i].removeAttribute(l))}function me(r,a,l,t,o){be(r,a,o),ue(l,t,o)}function ve(r){var a=e.$el.find(".fr-selected-cell");r!="REMOVE"?a.css("background-color",e.helpers.HEXtoRGB(r)):a.css("background-color",""),k()}function Ce(r){r.style.removeProperty("border"),r.style.removeProperty("border-top"),r.style.removeProperty("border-bottom"),r.style.removeProperty("border-left"),r.style.removeProperty("border-right")}function M(r){var a=[];if((r=r||null)==null&&0<T().length&&(r=A()),r){if(!r.find("tr").html().match(/xl[0-9]+/gi))for(var l=r.find("tr:empty"),t=l.length-1;0<=t;t--)h(l[t]).remove();r.find("tr").not(r.find("> table tr")).each(function(o,s){var c=h(s),f=0;c.find("> th, > td").each(function(i,n){for(var p=h(n),C=parseInt(p.attr("colspan"),10)||1,v=parseInt(p.attr("rowspan"),10)||1,g=o;g<o+v;g++)for(var m=f;m<f+C;m++)a[g]||(a[g]=[]),a[g][m]?f++:a[g][m]=n;f+=C})})}return a}function B(r,a){for(var l=0;l<a.length;l++)for(var t=0;t<a[l].length;t++)if(a[l][t]==r)return{row:l,col:t}}function X(r,a,l){for(var t=r+1,o=a+1;t<l.length;){if(l[t][a]!=l[r][a]){t--;break}t++}for(t==l.length&&t--;o<l[r].length;){if(l[r][o]!=l[r][a]){o--;break}o++}return o==l[r].length&&o--,{row:t,col:o}}function we(){e.el.querySelector(".fr-cell-fixed")&&e.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"),e.el.querySelector(".fr-cell-handler")&&e.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler")}function I(){var r=e.$el.find(".fr-selected-cell");0<r.length&&r.each(function(){var a=h(this);a.removeClass("fr-selected-cell"),a.attr("class")===""&&a.removeAttr("class")}),we()}function G(){e.events.disableBlur(),e.selection.clear(),e.$el.addClass("fr-no-selection"),e.$el.blur(),e.events.enableBlur()}function U(r){var a=e.$el.find(".fr-selected-cell");if(0<a.length){var l,t=r.length,o=0,s=r[0].length,c=0;for(l=0;l<a.length;l++){var f=B(a[l],r),i=X(f.row,f.col,r);t=Math.min(f.row,t),o=Math.max(i.row,o),s=Math.min(f.col,s),c=Math.max(i.col,c)}return{min_i:t,max_i:o,min_j:s,max_j:c}}return null}function Ee(r){var a=U(r);if(a!=null){var l=h(r[a.min_i][a.min_j]),t=h(r[a.min_i][a.max_j]),o=h(r[a.max_i][a.min_j]);return{left:l.length&&l.offset().left,right:t.length&&t.offset().left+t.outerWidth(),top:l.length&&l.offset().top,bottom:o.length&&o.offset().top+o.outerHeight()}}}function Y(r,a){if(h(r).is(a))I(),h(r).addClass("fr-selected-cell");else{G(),e.edit.off();var l=M(),t=B(r,l),o=B(a,l);if(!t||!o)return;var s=function i(n,p,C,v,g){var m,y,w,$,x=n,E=p,O=C,_=v;for(m=x;m<=E;m++)(1<(parseInt(h(g[m][O]).attr("rowspan"),10)||1)||1<(parseInt(h(g[m][O]).attr("colspan"),10)||1))&&($=X((w=B(g[m][O],g)).row,w.col,g),x=Math.min(w.row,x),E=Math.max($.row,E),O=Math.min(w.col,O),_=Math.max($.col,_)),(1<(parseInt(h(g[m][_]).attr("rowspan"),10)||1)||1<(parseInt(h(g[m][_]).attr("colspan"),10)||1))&&($=X((w=B(g[m][_],g)).row,w.col,g),x=Math.min(w.row,x),E=Math.max($.row,E),O=Math.min(w.col,O),_=Math.max($.col,_));for(y=O;y<=_;y++)(1<(parseInt(h(g[x][y]).attr("rowspan"),10)||1)||1<(parseInt(h(g[x][y]).attr("colspan"),10)||1))&&($=X((w=B(g[x][y],g)).row,w.col,g),x=Math.min(w.row,x),E=Math.max($.row,E),O=Math.min(w.col,O),_=Math.max($.col,_)),(1<(parseInt(h(g[E][y]).attr("rowspan"),10)||1)||1<(parseInt(h(g[E][y]).attr("colspan"),10)||1))&&($=X((w=B(g[E][y],g)).row,w.col,g),x=Math.min(w.row,x),E=Math.max($.row,E),O=Math.min(w.col,O),_=Math.max($.col,_));return x==n&&E==p&&O==C&&_==v?{min_i:n,max_i:p,min_j:C,max_j:v}:i(x,E,O,_,g)}(Math.min(t.row,o.row),Math.max(t.row,o.row),Math.min(t.col,o.col),Math.max(t.col,o.col),l);I(),r.classList.add("fr-cell-fixed"),a.classList.add("fr-cell-handler");for(var c=s.min_i;c<=s.max_i;c++)for(var f=s.min_j;f<=s.max_j;f++)h(r).closest("table").is(h(l[c][f]).closest("table"))&&h(l[c][f]).addClass("fr-selected-cell")}}function le(r){var a=null,l=h(r.target);return r.target.tagName=="TD"||r.target.tagName=="TH"?a=r.target:0<l.closest("th",l.closest("thead")[0]).length?a=l.closest("th",l.closest("thead")[0]).get(0):0<l.closest("td",l.closest("tr")[0]).length&&(a=l.closest("td",l.closest("tr")[0]).get(0)),e.$el.html.toString().search(a)===-1?null:a}function q(){I(),e.popups.hide("table.edit")}function ye(r){var a=le(r);if(h(a).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable")=="false")return!0;if(0<T().length&&!a&&q(),!e.edit.isDisabled()||e.popups.isVisible("table.edit")){if(r.which!=1||r.which==1&&e.helpers.isMac()&&r.ctrlKey)(r.which==3||r.which==1&&e.helpers.isMac()&&r.ctrlKey)&&a&&q();else if(N=!0,a){0<T().length&&!r.shiftKey&&q(),r.stopPropagation(),e.events.trigger("image.hideResizer"),e.events.trigger("video.hideResizer"),D=!0;var l=a.tagName.toLowerCase();r.shiftKey&&0<e.$el.find("".concat(l,".fr-selected-cell")).length?h(e.$el.find("".concat(l,".fr-selected-cell")).closest("table")).is(h(a).closest("table"))?Y(K,a):G():((e.keys.ctrlKey(r)||r.shiftKey)&&r.currentTarget.tagName==="TD"&&(1<T().length||h(a).find(e.selection.element()).length===0&&!h(a).is(e.selection.element()))&&G(),K=a,0<e.opts.tableEditButtons.length&&Y(K,K))}}}function re(r){if(!e.edit.isDisabled()&&e.popups.areVisible())return!0;var a=le(r);if(T().length===1&&a===null&&(e.toolbar.enable(),I()),(T().length===1&&a&&a.tagName!=="TD"&&a.tagName!=="TH"||!D&&!e.$tb.is(r.target)&&!e.$tb.is(h(r.target).closest(".fr-toolbar")))&&(e.toolbar.enable(),I()),(r.target.tagName==="BODY"||r.target.tagName==="HTML")&&!a&&0<T().length&&e.toolbar.enable(),!(r.which!=1||r.which==1&&e.helpers.isMac()&&r.ctrlKey)&&(N=!1,D&&(D=!1,le(r)||T().length!=1?0<T().length?e.selection.isCollapsed()?(k(),e.toolbar.enable()):(I(),e.edit.on()):T().length||(e.$el.removeClass("fr-no-selection"),e.edit.on()):I()),V)){V=!1,d.removeClass("fr-moving"),e.$el.removeClass("fr-no-selection"),e.edit.on();var l=parseFloat(d.css("left"))+e.opts.tableResizerOffset+e.$wp.offset().left;e.opts.iframe&&(l-=e.$iframe.offset().left),d.data("release-position",l),d.removeData("max-left"),d.removeData("max-right"),function(){var o=d.data("origin"),s=d.data("release-position");if(o!==s){var c=d.data("first"),f=d.data("second"),i=d.data("table"),n=i.outerWidth();if(e.undo.canDo()||e.undo.saveStep(),c!=null&&f!=null){var p,C,v,g=M(i),m=[],y=[],w=[],$=[];for(p=0;p<g.length;p++)C=h(g[p][c]),v=h(g[p][f]),m[p]=C.outerWidth(),w[p]=v.outerWidth(),y[p]=m[p]/n*100,$[p]=w[p]/n*100;for(p=0;p<g.length;p++)if(C=h(g[p][c]),v=h(g[p][f]),g[p][c]!=g[p][f]){var x=(y[p]*(m[p]+s-o)/m[p]).toFixed(4);C.css("width",x+"%"),v.css("width",(y[p]+$[p]-x).toFixed(4)+"%")}}else{var E,O=i.parent(),_=parseFloat(O.css("padding-left")),H=parseFloat(O.css("padding-right")),F=_+H,z=n/(O.width()-F)*100,se=(parseInt(i.css("margin-left"),10)||0)/O.width()*100,We=(parseInt(i.css("margin-right"),10)||0)/O.width()*100;e.opts.direction=="rtl"&&f===0||e.opts.direction!="rtl"&&f!==0?(E=(n+s-o)/n*z,i.css("margin-right","calc(100% - ".concat(Math.round(E).toFixed(4),"% - ").concat(Math.round(se).toFixed(4),"%)"))):(e.opts.direction=="rtl"&&f!==0||e.opts.direction!="rtl"&&f===0)&&(E=(n-s+o)/n*z,i.css("margin-left","calc(100% - ".concat(Math.round(E).toFixed(4),"% - ").concat(Math.round(We).toFixed(4),"%)"))),i.css("width","".concat(Math.round(E).toFixed(4),"%"))}e.selection.restore(),e.undo.saveStep(),e.events.trigger("table.resized",[i.get(0)])}d.removeData("origin"),d.removeData("release-position"),d.removeData("first"),d.removeData("second"),d.removeData("table")}(),ne()}}function ke(r){if((!(h(r.currentTarget).is(h(r.originalEvent.relatedTarget))||r.currentTarget.contains(r.originalEvent.relatedTarget)||r.originalEvent.relatedTarget&&r.originalEvent.relatedTarget.contains(r.currentTarget))||r.currentTarget.querySelector("input, textarea"))&&(e.events.$on(h("input, textarea"),"click",ze),D===!0&&0<e.opts.tableEditButtons.length)){if(h(r.currentTarget).closest("table").is(A())&&(r.currentTarget.parentElement.parentElement.tagName==="TBODY"&&r.currentTarget.tagName=="TD"&&e.$el.find("th.fr-selected-cell").length===0&&e.$el.find("tfoot td.fr-selected-cell").length===0||r.currentTarget.parentElement.parentElement.tagName==="TFOOT"&&r.currentTarget.tagName=="TD"&&e.$el.find("tbody td.fr-selected-cell").length===0||r.currentTarget.tagName=="TH"&&e.$el.find("td.fr-selected-cell").length===0))return void Y(K,r.currentTarget);r.currentTarget.tagName!=="TD"&&r.currentTarget.tagName!=="TH"&&G()}}function Te(r,a,l,t){for(var o,s=a;s!=e.el&&s.tagName!="TD"&&s.tagName!="TH"&&(t=="up"?o=s.previousElementSibling:t=="down"&&(o=s.nextElementSibling),!o);)s=s.parentNode;s.tagName=="TD"||s.tagName=="TH"?function(f,i){for(var n=f;n&&n.tagName!="TABLE"&&n.parentNode!=e.el;)n=n.parentNode;if(n&&n.tagName=="TABLE"){var p=M(h(n));i=="up"?Oe(B(f,p),n,p):i=="down"&&xe(B(f,p),n,p)}}(s,t):o&&(t=="up"&&e.selection.setAtEnd(o),t=="down"&&e.selection.setAtStart(o))}function Oe(r,a,l){0<h(".tribute-container").length&&h(".tribute-container").css("display")!="none"||(0<r.row?e.selection.setAtEnd(l[r.row-1][r.col]):Te(0,a,0,"up"))}function xe(r,a,l){if(!(0<h(".tribute-container").length&&h(".tribute-container").css("display")!="none")){var t=parseInt(l[r.row][r.col].getAttribute("rowspan"),10)||1;r.row<l.length-t?e.selection.setAtStart(l[r.row+t][r.col]):Te(0,a,0,"down")}}function ne(){d&&(d.find("div").css("opacity",0),d.css("top",0),d.css("left",0),d.css("height",0),d.find("div").css("height",0),d.hide())}function R(){u&&u.removeClass("fr-visible").css("left","-9999px")}function Ke(r,a){var l,t=h(a);t&&(l=t.closest("table"));var o=l.parent();if(a&&a.tagName!="TD"&&a.tagName!="TH"&&(0<t.closest("td").length?a=t.closest("td"):0<t.closest("th").length&&(a=t.closest("th"))),!a||a.tagName!="TD"&&a.tagName!="TH")d&&t.get(0)!=d.get(0)&&t.parent().get(0)!=d.get(0)&&e.core.sameInstance(d)&&ne();else{if(t=h(a),e.$el.find(t).length===0)return!1;var s=t.offset().left-1,c=s+t.outerWidth();if(Math.abs(r.pageX-s)<=e.opts.tableResizerOffset||Math.abs(c-r.pageX)<=e.opts.tableResizerOffset){var f,i,n,p,C,v=M(l),g=B(a,v),m=X(g.row,g.col,v),y=l.offset().top,w=l.outerHeight()-1;e.opts.direction!="rtl"?r.pageX-s<=e.opts.tableResizerOffset?(n=s,0<g.col?(p=s-W(g.col-1,v)+e.opts.tableResizingLimit,C=s+W(g.col,v)-e.opts.tableResizingLimit,f=g.col-1,i=g.col):(f=null,i=0,p=l.offset().left-1-parseInt(l.css("margin-left"),10),C=l.offset().left-1+l.width()-v[0].length*e.opts.tableResizingLimit)):c-r.pageX<=e.opts.tableResizerOffset&&(n=c,m.col<v[m.row].length&&v[m.row][m.col+1]?(p=c-W(m.col,v)+e.opts.tableResizingLimit,C=c+W(m.col+1,v)-e.opts.tableResizingLimit,f=m.col,i=m.col+1):(f=m.col,i=null,p=l.offset().left-1+v[0].length*e.opts.tableResizingLimit,C=o.offset().left-1+o.width()+parseFloat(o.css("padding-left")))):c-r.pageX<=e.opts.tableResizerOffset?(n=c,0<g.col?(p=c-W(g.col,v)+e.opts.tableResizingLimit,C=c+W(g.col-1,v)-e.opts.tableResizingLimit,f=g.col,i=g.col-1):(f=null,i=0,p=l.offset().left+v[0].length*e.opts.tableResizingLimit,C=o.offset().left-1+o.width()+parseFloat(o.css("padding-left")))):r.pageX-s<=e.opts.tableResizerOffset&&(n=s,m.col<v[m.row].length&&v[m.row][m.col+1]?(p=s-W(m.col+1,v)+e.opts.tableResizingLimit,C=s+W(m.col,v)-e.opts.tableResizingLimit,f=m.col+1,i=m.col):(f=m.col,i=null,p=o.offset().left+parseFloat(o.css("padding-left")),C=l.offset().left-1+l.width()-v[0].length*e.opts.tableResizingLimit)),d||function(){e.shared.$table_resizer||(e.shared.$table_resizer=h(document.createElement("div")).attr("class","fr-table-resizer").html("<div></div>")),d=e.shared.$table_resizer,e.events.$on(d,"mousedown",function(H){return!e.core.sameInstance(d)||(0<T().length&&q(),H.which==1?(e.selection.save(),V=!0,d.addClass("fr-moving"),G(),e.edit.off(),d.find("div").css("opacity",1),!1):void 0)}),e.events.$on(d,"mousemove",function(H){if(!e.core.sameInstance(d))return!0;V&&(e.opts.iframe&&(H.pageX-=e.$iframe.offset().left),_e(H))}),e.events.on("shared.destroy",function(){d.html("").removeData().remove(),d=null},!0),e.events.on("destroy",function(){e.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),h("body").first().append(d.hide())},!0)}(),d.data("table",l),d.data("first",f),d.data("second",i),d.data("instance",e),e.$wp.append(d);var $=n-e.win.pageXOffset-e.opts.tableResizerOffset-e.$wp.offset().left,x=y-e.$wp.offset().top+e.$wp.scrollTop();if(e.opts.iframe){var E=e.helpers.getPX(e.$wp.find(".fr-iframe").css("padding-top")),O=e.helpers.getPX(e.$wp.find(".fr-iframe").css("padding-left"));$+=e.$iframe.offset().left+O,x+=e.$iframe.offset().top+E,p+=e.$iframe.offset().left,C+=e.$iframe.offset().left}d.data("max-left",p),d.data("max-right",C),d.data("origin",n-e.win.pageXOffset),d.css("top",x),d.css("left",$),d.css("height",w),d.find("div").css("height",w),d.css("padding-left",e.opts.tableResizerOffset),d.css("padding-right",e.opts.tableResizerOffset),d.show()}else e.core.sameInstance(d)&&ne()}}function Be(r,a){if(e.$box.find(".fr-line-breaker").isVisible())return!1;u||Ne(),e.$box.append(u),u.data("instance",e);var l,t=h(a).find("tr").first(),o=r.pageX,s=0,c=0;if(e.opts.iframe){var f=e.helpers.getPX(e.$wp.find(".fr-iframe").css("padding-top")),i=e.helpers.getPX(e.$wp.find(".fr-iframe").css("padding-left"));s+=e.$iframe.offset().left-e.helpers.scrollLeft()+i,c+=e.$iframe.offset().top-e.helpers.scrollTop()+f}t.find("th, td").each(function(){var n=h(this);return n.offset().left<=o&&o<n.offset().left+n.outerWidth()/2?(l=parseInt(u.find("a").css("width"),10),u.css("top",c+n.offset().top-e.$box.offset().top-l-5),u.css("left",s+n.offset().left-e.$box.offset().left-l/2),u.data("selected-cell",n),u.data("position","before"),u.addClass("fr-visible"),!1):n.offset().left+n.outerWidth()/2<=o&&o<n.offset().left+n.outerWidth()?(l=parseInt(u.find("a").css("width"),10),u.css("top",c+n.offset().top-e.$box.offset().top-l-5),u.css("left",s+n.offset().left-e.$box.offset().left+n.outerWidth()-l/2),u.data("selected-cell",n),u.data("position","after"),u.addClass("fr-visible"),!1):void 0})}function Fe(r,a){if(e.$box.find(".fr-line-breaker").isVisible())return!1;u||Ne(),e.$box.append(u),u.data("instance",e);var l,t=h(a),o=r.pageY,s=0,c=0;if(e.opts.iframe){var f=e.helpers.getPX(e.$wp.find(".fr-iframe").css("padding-top")),i=e.helpers.getPX(e.$wp.find(".fr-iframe").css("padding-left"));s+=e.$iframe.offset().left-e.helpers.scrollLeft()+i,c+=e.$iframe.offset().top-e.helpers.scrollTop()+f}t.find("tr").each(function(){var n=h(this);l=parseInt(u.find("a").css("width"),10);var p=s+n.offset().left-e.$box.offset().left;return p=e.$box.offset().left!==0?p-l-5:p+l-5,n.offset().top<=o&&o<n.offset().top+n.outerHeight()/2?(u.css("top",c+n.offset().top-e.$box.offset().top-l/2),u.css("left",p),u.data("selected-cell",n.find("td").first()),u.data("position","above"),u.addClass("fr-visible"),!1):n.offset().top+n.outerHeight()/2<=o&&o<n.offset().top+n.outerHeight()?(u.css("top",c+n.offset().top-e.$box.offset().top+n.outerHeight()-l/2),u.css("left",p),u.data("selected-cell",n.find("td").first()),u.data("position","below"),u.addClass("fr-visible"),!1):void 0})}function oe(){S[e.id]&&(S[e.id].css("top",-9999),S[e.id].css("left",-9999),S[e.id].removeClass("fr-table-selector-active-selected"),S[e.id].removeClass("fr-table-selector-active"),S[e.id].addClass("fr-table-selector-inactive"),e.$el.find("table.fr-table-selection-hover").removeClass("fr-table-selection-hover"))}function J(){var r=e.$el.find("table.fr-table-selected");r.removeClass("fr-table-selected"),r.removeClass("fr-table-selection-hover"),oe()}function $e(r){e.$box.append(S[e.id]),S[e.id].data("instance",e);var a=r.offset().left-e.$box.offset().left+16,l=r.offset().top-e.$box.offset().top-S[e.id].outerHeight();if(e.opts.iframe){var t=e.helpers.getPX(e.$wp.find(".fr-iframe").css("padding-top")),o=e.helpers.getPX(e.$wp.find(".fr-iframe").css("padding-left"));a+=e.$iframe.offset().left-e.helpers.scrollLeft()+o,l+=e.$iframe.offset().top-e.helpers.scrollTop()+t}S[e.id].css("top",l),S[e.id].css("left",a)}function Ae(r){Z=null;var a=e.doc.elementFromPoint(r.pageX-e.win.pageXOffset,r.pageY-e.win.pageYOffset);e.opts.tableResizer&&(!e.popups.areVisible()||e.popups.areVisible()&&e.popups.isVisible("table.edit"))&&Ke(r,a),!e.opts.tableInsertHelper||e.popups.areVisible()||e.$tb.hasClass("fr-inline")&&e.$tb.isVisible()||function(t,o){if(T().length===0){var s,c,f;if(o&&(o.tagName=="HTML"||o.tagName=="BODY"||e.node.isElement(o)))for(s=1;s<=e.opts.tableInsertHelperOffset;s++){if(c=e.doc.elementFromPoint(t.pageX-e.win.pageXOffset,t.pageY-e.win.pageYOffset+s),h(c).hasClass("fr-tooltip"))return!0;if(c&&(c.tagName=="TH"||c.tagName=="TD"||c.tagName=="TABLE")&&(h(c).parents(".fr-wrapper").length||e.opts.iframe)&&h(c).closest("table").attr("contenteditable")!="false")return Be(t,h(c).closest("table")),!0;if(f=e.doc.elementFromPoint(t.pageX-e.win.pageXOffset+s,t.pageY-e.win.pageYOffset),h(f).hasClass("fr-tooltip"))return!0;if(f&&(f.tagName=="TH"||f.tagName=="TD"||f.tagName=="TABLE")&&(h(f).parents(".fr-wrapper").length||e.opts.iframe)&&h(f).closest("table").attr("contenteditable")!="false")return Fe(t,h(f).closest("table")),!0}e.core.sameInstance(u)&&R()}}(r,a),function(t,o){var s=h(o),c=e.$el.find("table.fr-table-selection-hover"),f=e.$el.find("table.fr-table-selected");if(e.node.isElement(o)||e.node.isElement(s.parents(".fr-view").first().get(0))||e.core.sameInstance(s)||e.core.sameInstance(s.parents("div.fr-table-selector"))){if(!s.parents(".fr-table-selector").length){var i=s?s.closest("table"):null;i.length?($e(i),S[e.id].addClass("fr-table-selector-active"),S[e.id].removeClass("fr-table-selector-inactive"),c.removeClass("fr-table-selection-hover"),f.length&&S[e.id].toggleClass("fr-table-selector-active-selected",f.get(0)===i.get(0)),i.addClass("fr-table-selection-hover")):c.length&&Math.abs(c.offset().top-t.pageY)<16||S[e.id].hasClass("fr-table-selector-inactive")||oe()}}else f.length||oe()}(r,a)}function Le(){if(V){var r=d.data("table").offset().top-e.win.pageYOffset;if(e.opts.iframe){var a=e.helpers.getPX(e.$wp.find(".fr-iframe").css("padding-top"));r+=e.$iframe.offset().top-e.helpers.scrollTop()+a}d.css("top",r)}}function W(r,a){var l,t=h(a[0][r]).outerWidth();for(l=1;l<a.length;l++)t=Math.min(t,h(a[l][r]).outerWidth());return t}function De(r,a,l){var t,o=0;for(t=r;t<=a;t++)o+=W(t,l);return o}function _e(r){if(1<T().length&&N&&G(),N===!1&&D===!1&&V===!1)Z&&clearTimeout(Z),e.edit.isDisabled()&&!e.popups.isVisible("table.edit")||(Z=setTimeout(Ae,30,r));else if(V){var a=r.pageX-e.win.pageXOffset;e.opts.iframe&&(a+=e.$iframe.offset().left);var l=d.data("max-left"),t=d.data("max-right");l<=a&&a<=t?d.css("left",a-e.opts.tableResizerOffset-e.$wp.offset().left):a<l&&parseFloat(d.css("left"),10)>l-e.opts.tableResizerOffset?d.css("left",l-e.opts.tableResizerOffset-e.$wp.offset().left):t<a&&parseFloat(d.css("left"),10)<t-e.opts.tableResizerOffset&&d.css("left",t-e.opts.tableResizerOffset-e.$wp.offset().left)}else N&&R()}function j(r){e.node.isEmpty(r.get(0))?e.opts.keepTextFormatOnTable&&e.browser.mozilla?r.append(b.MARKERS):r.prepend(b.MARKERS):r.prepend(b.START_MARKER).append(b.END_MARKER)}function Ne(){e.shared.$ti_helper||(e.shared.$ti_helper=h(document.createElement("div")).attr("class","fr-insert-helper").html('<a class="fr-floating-btn" role="button" tabIndex="-1" title="'.concat(e.language.translate("Insert"),'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a>')),e.events.bindClick(e.shared.$ti_helper,"a",function(){var r=u.data("selected-cell"),a=u.data("position"),l=u.data("instance")||e;a=="before"||a=="after"?(e.undo.saveStep(),r.addClass("fr-selected-cell"),l.table.insertColumn(a),r.removeClass("fr-selected-cell"),e.undo.saveStep()):(a=="above"||a=="below")&&(e.undo.saveStep(),r.addClass("fr-selected-cell"),l.table.insertRow(a),r.removeClass("fr-selected-cell"),e.undo.saveStep()),R()}),e.events.on("shared.destroy",function(){e.shared.$ti_helper.html("").removeData().remove(),e.shared.$ti_helper=null},!0),e.events.$on(e.shared.$ti_helper,"mousemove",function(r){r.stopPropagation()},!0),e.events.$on(h(e.o_win),"scroll",function(){R()},!0),e.events.$on(e.$wp,"scroll",function(){R()},!0)),u=e.shared.$ti_helper,e.events.on("destroy",function(){u=null}),e.tooltip.bind(e.$box,".fr-insert-helper > a.fr-floating-btn")}function Ye(){K=null,clearTimeout(Z)}function T(){return e.el.querySelectorAll(".fr-selected-cell")}function A(){var r=T();if(r.length){for(var a=r[0];a&&a.tagName!="TABLE"&&a.parentNode!=e.el;)a=a.parentNode;return a&&a.tagName=="TABLE"?h(a):h([])}return h([])}function ze(){D=!1}return{_init:function(){if(!e.$wp)return!1;if(e.helpers.isMobile()&&(e.events.$on(e.$el,"mousedown",ye),e.events.$on(e.$win,"mouseup",re)),!e.helpers.isMobile()){V=D=N=!1,e.events.$on(e.$el,"mousedown",ye),e.popups.onShow("image.edit",function(){I(),D=N=!1}),e.popups.onShow("link.edit",function(){I(),D=N=!1}),e.events.on("commands.mousedown",function(t){0<t.parents(".fr-toolbar").length&&I()}),e.events.$on(e.$el,"mouseover","th, td",ke),e.events.$on(e.$win,"mouseup",re),e.opts.iframe&&e.events.$on(h(e.o_win),"mouseup",re),e.events.$on(e.$win,"mousemove",_e),e.events.$on(h(e.o_win),"scroll",Le),e.events.on("contentChanged",function(){0<T().length&&(k(),e.$el.find("img").on("load.selected-cells",function(){h(this).off("load.selected-cells"),0<T().length&&k()}))}),e.events.$on(h(e.o_win),"resize",function(){I()}),e.events.on("toolbar.esc",function(){if(0<T().length)return e.events.disableBlur(),e.events.focus(),!1},!0),e.events.$on(h(e.o_win),"keydown",function(){N&&D&&(D=N=!1,e.$el.removeClass("fr-no-selection"),e.edit.on(),e.selection.setAtEnd(e.$el.find(".fr-selected-cell").last().get(0)),e.selection.restore(),I())}),e.events.$on(e.$el,"keydown",function(t){t.shiftKey?function(s){var c=T();if(c!=null&&0<c.length){var f,i=M(),n=s.which,p=B(c.length==1?f=c[0]:(f=e.el.querySelector(".fr-cell-fixed"),e.el.querySelector(".fr-cell-handler")),i);if(b.KEYCODE.ARROW_RIGHT==n){if(p.col<i[0].length-1)return Y(f,i[p.row][p.col+1]),!1}else if(b.KEYCODE.ARROW_DOWN==n){if(p.row<i.length-1)return Y(f,i[p.row+1][p.col]),!1}else if(b.KEYCODE.ARROW_LEFT==n){if(0<p.col)return Y(f,i[p.row][p.col-1]),!1}else if(b.KEYCODE.ARROW_UP==n&&0<p.row)return Y(f,i[p.row-1][p.col]),!1}}(t)===!1&&setTimeout(function(){k()},0):function(s){var c=s.which,f=e.selection.blocks();if(f.length&&((f=f[0]).tagName!=="P"&&f.tagName!=="DIV"||(f=f.parentNode),f.tagName=="TD"||f.tagName=="TH")){for(var i=f;i&&i.tagName!="TABLE"&&i.parentNode!=e.el;)i=i.parentNode;if(i&&i.tagName=="TABLE"&&(b.KEYCODE.ARROW_LEFT==c||b.KEYCODE.ARROW_UP==c||b.KEYCODE.ARROW_RIGHT==c||b.KEYCODE.ARROW_DOWN==c)&&(0<T().length&&q(),e.browser.webkit&&(b.KEYCODE.ARROW_UP==c||b.KEYCODE.ARROW_DOWN==c))){var n=e.selection.ranges(0).startContainer;if(n.nodeType==Node.TEXT_NODE&&(b.KEYCODE.ARROW_UP==c&&(n.previousSibling&&n.previousSibling.tagName!=="BR"||n.previousSibling&&n.previousSibling.tagName==="BR"&&n.previousSibling.previousSibling)||b.KEYCODE.ARROW_DOWN==c&&(n.nextSibling&&n.nextSibling.tagName!=="BR"||n.nextSibling&&n.nextSibling.tagName==="BR"&&n.nextSibling.nextSibling)))return;s.preventDefault(),s.stopPropagation();var p=M(h(i)),C=B(f,p);return b.KEYCODE.ARROW_UP==c?Oe(C,i,p):b.KEYCODE.ARROW_DOWN==c&&xe(C,i,p),e.selection.restore(),!1}}}(t)}),e.events.on("keydown",function(t){if(function(f){if(f.which==b.KEYCODE.TAB){var i;if(0<T().length)i=e.$el.find(".fr-selected-cell").last();else{var n=e.selection.element();n.tagName=="TD"||n.tagName=="TH"?i=h(n):n!=e.el&&(0<h(n).parentsUntil(e.$el,"td").length?i=h(n).parents("td").first():0<h(n).parentsUntil(e.$el,"th").length&&(i=h(n).parents("th").first()))}if(i)return f.preventDefault(),!!(e.selection.get().focusOffset===0&&0<h(e.selection.element()).parentsUntil(e.$el,"ol, ul").length&&(0<h(e.selection.element()).closest("li").prev().length||h(e.selection.element()).is("li")&&0<h(e.selection.element()).prev().length))||(q(),f.shiftKey?0<i.prev().length?j(i.prev()):0<i.closest("tr").length&&0<i.closest("tr").prev().length?j(i.closest("tr").prev().find("td").last()):0<i.closest("tbody").length&&0<i.closest("table").find("thead tr").length&&j(i.closest("table").find("thead tr th").last()):0<i.next().length?j(i.next()):0<i.closest("tr").length&&0<i.closest("tr").next().length?j(i.closest("tr").next().find("td").first()):0<i.closest("thead").length&&0<i.closest("table").find("tbody tr").length?j(i.closest("table").find("tbody tr td").first()):(i.addClass("fr-selected-cell"),he("below"),I(),j(i.closest("tr").next().find("td").first())),e.selection.restore(),!1)}}(t)===!1)return!1;if(t.which==b.KEYCODE.ESC&&J(),e.$el.find("table.fr-table-selected").length){if(!t.ctrlKey&&!t.metaKey)return t.preventDefault(),t.stopPropagation(),!1;t.key==="a"&&J()}var o=T();if(0<o.length){if(0<o.length&&e.keys.ctrlKey(t)&&t.which==b.KEYCODE.A)return I(),e.popups.isVisible("table.edit")&&e.popups.hide("table.edit"),o=[],!0;if(t.which==b.KEYCODE.ESC&&e.popups.isVisible("table.edit"))return I(),e.popups.hide("table.edit"),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!(o=[]);if(1<o.length&&(t.which==b.KEYCODE.BACKSPACE||t.which==b.KEYCODE.DELETE)){e.undo.saveStep();for(var s=0;s<o.length;s++)h(o[s]).html("<br>"),s==o.length-1&&h(o[s]).prepend(b.MARKERS);return e.selection.restore(),e.undo.saveStep(),!(o=[])}if(1<o.length&&t.which!=b.KEYCODE.F10&&!e.keys.isBrowserAction(t))return t.preventDefault(),!(o=[])}else if(!(o=[])===function(f){if(f.altKey&&f.which==b.KEYCODE.SPACE){var i,n=e.selection.element();if(n.tagName=="TD"||n.tagName=="TH"?i=n:0<h(n).closest("td").length?i=h(n).closest("td").get(0):0<h(n).closest("th").length&&(i=h(n).closest("th").get(0)),i)return f.preventDefault(),Y(i,i),k(),!1}}(t))return!1},!0);var a=null,l=[];e.events.on("html.beforeGet",function(){l=T();for(var t=0;t<l.length;t++)l[t].className=(l[t].className||"").replace(/fr-selected-cell/g,"");(a=e.$el.find("table.fr-table-selected"))&&a.length&&a.removeClass("fr-table-selected")}),e.events.on("html.afterGet",function(){for(var t=0;t<l.length;t++)l[t].className=(l[t].className?l[t].className.trim()+" ":"")+"fr-selected-cell";l=[],a&&a.length&&a.addClass("fr-table-selected")}),fe(!0),ce(!0),Ie()}e.events.on("destroy",Ye)},insert:function(a,l){var t,o,s=function(){var C={startTag:"",closeTag:""};if(e.opts.keepTextFormatOnTable){var v=h(e.selection.element().firstChild).parentsUntil(e.$el);C=pe(v)}return{startTag:C.startTag,closeTag:C.closeTag}}(),c="<table "+(e.opts.tableDefaultWidth?'style="width: '+e.opts.tableDefaultWidth+';" ':"")+'class="fr-inserted-table"><tbody>',f=100/l;for(t=0;t<a;t++){for(c+="<tr>",o=0;o<l;o++)c+="<td"+(e.opts.tableDefaultWidth?' style="width: '+f.toFixed(4)+'%;"':"")+">"+s.startTag,t===0&&o===0&&(c+=b.MARKERS),c+="<br>"+s.closeTag+"</td>";c+="</tr>"}if(c+="</tbody></table>",e.opts.trackChangesEnabled){e.edit.on(),e.events.focus(!0),e.selection.restore(),e.undo.saveStep(),e.markers.insert(),e.html.wrap();var i=e.$el.find(".fr-marker");e.node.isLastSibling(i)&&i.parent().hasClass("fr-deletable")&&i.insertAfter(i.parent()),i.replaceWith(c),e.selection.clear()}else e.html.insert(c);e.selection.restore();var n=e.$el.find(".fr-inserted-table");n.removeClass("fr-inserted-table"),e.events.trigger("table.inserted",[n.get(0)])},remove:Q,insertRow:he,deleteRow:function(){var a=A();if(0<a.length){var l,t,o,s=M(),c=U(s);if(c==null)return;if(c.min_i===0&&c.max_i==s.length-1)Q();else{for(l=c.max_i;l>=c.min_i;l--){for(o=h(a.find("tr").not(a.find("> table tr")).get(l)),t=0;t<s[l].length;t++)if(t===0||s[l][t]!=s[l][t-1]){var f=h(s[l][t]);if(1<parseInt(f.attr("rowspan"),10)){var i=parseInt(f.attr("rowspan"),10)-1;i==1?f.removeAttr("rowspan"):f.attr("rowspan",i)}if(l<s.length-1&&s[l][t]==s[l+1][t]&&(l===0||s[l][t]!=s[l-1][t])){for(var n=s[l][t],p=t;0<p&&s[l][p]==s[l][p-1];)p--;p===0?h(a.find("tr").not(a.find("> table tr")).get(l+1)).prepend(n):h(s[l+1][p-1])[0].parentNode&&h(s[l+1][p-1])[0].insertAdjacentElement("afterend",n)}}var C=o.parent();o.remove(),C.find("tr").length===0&&C.remove(),s=M(a)}me(0,s.length-1,0,s[0].length-1,a),0<c.min_i?e.selection.setAtEnd(s[c.min_i-1][0]):e.selection.setAtEnd(s[0][0]),e.selection.restore(),e.popups.hide("table.edit")}}},insertColumn:function(a){var l=A();if(0<l.length){var t,o=M(),s=U(o);t=a=="before"?s.min_j:s.max_j;var c,f=100/o[0].length,i=100/(o[0].length+1);l.find("th, td").each(function(){(c=h(this)).data("old-width",c.outerWidth()/l.outerWidth()*100)}),l.find("tr").not(l.find("> table tr")).each(function(n){for(var p,C=h(this),v=0,g=0;v-1<t;){if(!(p=C.find("> th, > td").get(g))){p=null;break}p==o[n][v]?(v+=parseInt(h(p).attr("colspan"),10)||1,g++):(v+=parseInt(h(o[n][v]).attr("colspan"),10)||1,a=="after"&&(p=g===0?-1:C.find("> th, > td").get(g-1)))}var m=h(p);if(a=="after"&&t<v-1||a=="before"&&0<t&&o[n][t]==o[n][t-1]){if(n===0||0<n&&o[n][t]!=o[n-1][t]){var y=parseInt(m.attr("colspan"),10)+1;m.attr("colspan",y),m.css("width",(m.data("old-width")*i/f+i).toFixed(4)+"%"),m.removeData("old-width")}}else{var w,$=(m.get(0)||"").tagName;if(0<C.find("th").length&&$==="TH")w='<th style="width: '.concat(i.toFixed(4),'%;"><br></th>');else{var x=de(o[n][t]);w='<td style="'.concat(m.attr("style"),"; width: ").concat(i.toFixed(4),'%;">')+x.startTag+"<br>"+x.closeTag+"</td>"}h(w).append("<br>"),h(w).css("width","".concat(i.toFixed(4),"%")),p==-1?C.prepend(w):p==null?C.append(w):a=="before"?m.before(w):a=="after"&&m.after(w)}}),l.find("th, td").each(function(){(c=h(this)).data("old-width")&&(c.css("width",(c.data("old-width")*i/f).toFixed(4)+"%"),c.removeData("old-width"))}),e.popups.isVisible("table.edit")&&k()}},deleteColumn:function(){var a=A();if(0<a.length){var l,t,o,s=M(),c=U(s);if(c==null)return;if(c.min_j===0&&c.max_j==s[0].length-1)Q();else{var f=0;for(l=0;l<s.length;l++)for(t=0;t<s[0].length;t++)(o=h(s[l][t])).hasClass("fr-selected-cell")||(o.data("old-width",o.outerWidth()/a.outerWidth()*100),(t<c.min_j||t>c.max_j)&&(f+=o.outerWidth()/a.outerWidth()*100));for(f/=s.length,t=c.max_j;t>=c.min_j;t--)for(l=0;l<s.length;l++)if(l===0||s[l][t]!=s[l-1][t])if(o=h(s[l][t]),1<(parseInt(o.attr("colspan"),10)||1)){var i=parseInt(o.attr("colspan"),10)-1;i==1?o.removeAttr("colspan"):o.attr("colspan",i),o.css("width",(100*(o.data("old-width")-W(t,s))/f).toFixed(4)+"%"),o.removeData("old-width")}else{var n=h(o.parent().get(0));o.remove(),n.find("> th, > td").length===0&&(n.prev().length===0||n.next().length===0||n.prev().find("> th[rowspan], > td[rowspan]").length<n.prev().find("> th, > td").length)&&n.remove()}me(0,s.length-1,0,s[0].length-1,a),0<c.min_j?e.selection.setAtEnd(s[c.min_i][c.min_j-1]):e.selection.setAtEnd(s[c.min_i][0]),e.selection.restore(),e.popups.hide("table.edit"),a.find("th, td").each(function(){(o=h(this)).data("old-width")&&(o.css("width",(100*o.data("old-width")/f).toFixed(4)+"%"),o.removeData("old-width"))})}}},mergeCells:function(){if(1<T().length&&(e.$el.find("th.fr-selected-cell").length===0||e.$el.find("td.fr-selected-cell").length===0)){we();var a,l,t=U(M());if(t==null)return;var o=e.$el.find(".fr-selected-cell"),s=h(o[0]),c=s.parent().find(".fr-selected-cell"),f=s.closest("table"),i=s.html(),n=0;for(a=0;a<c.length;a++)n+=h(c[a]).outerWidth();for(s.css("width",Math.min(100,n/f.outerWidth()*100).toFixed(4)+"%"),t.min_j<t.max_j&&s.attr("colspan",t.max_j-t.min_j+1),t.min_i<t.max_i&&s.attr("rowspan",t.max_i-t.min_i+1),a=1;a<o.length;a++)(l=h(o[a])).html()!="<br>"&&l.html()!==""&&(i+="<br>".concat(l.html())),l.remove();s.html(i),e.selection.setAtEnd(s.get(0)),e.selection.restore(),e.toolbar.enable(),be(t.min_i,t.max_i,f);var p=f.find("tr:empty");for(a=p.length-1;0<=a;a--)h(p[a]).remove();ue(t.min_j,t.max_j,f),k()}},splitCellVertically:function(){if(T().length==1){var a=e.$el.find(".fr-selected-cell"),l=parseInt(a.attr("colspan"),10)||1,t=a.parent().outerWidth(),o=a.outerWidth(),s=a.clone().html("<br>"),c=M(),f=B(a.get(0),c);if(1<l){var i=Math.ceil(l/2);o=De(f.col,f.col+i-1,c)/t*100;var n=De(f.col+i,f.col+l-1,c)/t*100;1<i?a.attr("colspan",i):a.removeAttr("colspan"),1<l-i?s.attr("colspan",l-i):s.removeAttr("colspan"),a.css("width",o.toFixed(4)+"%"),s.css("width",n.toFixed(4)+"%")}else{var p;for(p=0;p<c.length;p++)if(p===0||c[p][f.col]!=c[p-1][f.col]){var C=h(c[p][f.col]);if(!C.is(a)){var v=(parseInt(C.attr("colspan"),10)||1)+1;C.attr("colspan",v)}}o=o/t*100/2,a.css("width","".concat(o.toFixed(4),"%")),s.css("width","".concat(o.toFixed(4),"%"))}a[0].parentNode&&a[0].insertAdjacentElement("afterend",s[0]),I(),e.popups.hide("table.edit")}},splitCellHorizontally:function(){if(T().length==1){var a=e.$el.find(".fr-selected-cell"),l=a.parent(),t=a.closest("table"),o=parseInt(a.attr("rowspan"),10),s=M(),c=B(a.get(0),s),f=a.clone().html("<br>");if(1<o){var i=Math.ceil(o/2);1<i?a.attr("rowspan",i):a.removeAttr("rowspan"),1<o-i?f.attr("rowspan",o-i):f.removeAttr("rowspan");for(var n=c.row+i,p=c.col===0?c.col:c.col-1;0<=p&&(s[n][p]==s[n][p-1]||0<n&&s[n][p]==s[n-1][p]);)p--;p==-1?h(t.find("tr").not(t.find("> table tr")).get(n)).prepend(f):h(s[n][p])[0].parentNode&&h(s[n][p])[0].insertAdjacentElement("afterend",f[0])}else{var C,v=h(document.createElement("tr")).append(f);for(C=0;C<s[0].length;C++)if(C===0||s[c.row][C]!=s[c.row][C-1]){var g=h(s[c.row][C]);g.is(a)||g.attr("rowspan",(parseInt(g.attr("rowspan"),10)||1)+1)}l[0].parentNode&&l[0].insertAdjacentElement("afterend",v[0])}I(),e.popups.hide("table.edit")}},addHeader:function(){var a=A();if(0<a.length&&a.find("> th").length===0){var l,t="<thead><tr>",o=0;for(o=a.find("tr").first().find("> th").length,a.find("tr").first().find("> td").each(function(){var s=h(this);o+=parseInt(s.attr("colspan"),10)||1}),l=0;l<o;l++)t+="<th><br></th>";t+="</tr></thead>",a.prepend(t),k()}},addFooter:function(){var a=A();if(0<a.length&&a.find("tfoot").length===0){var l="<tfoot><tr>",t=0,o=a.find("thead tr").first();o.length===0&&(o=a.find("tbody tr").first()),o.find("th, td").each(function(){t+=parseInt(h(this).attr("colspan"),10)||1});for(var s=0;s<t;s++)l+="<td><br></td>";l+="</tr></tfoot>",a.append(l),k()}},removeHeader:function(){var a=A(),l=a.find("> thead");if(0<(l=h(l)).length)if(a.find("tbody tr").length===0)Q();else if(l.remove(),0<T().length)k();else{e.popups.hide("table.edit");var t=a.find("tbody tr").first().find("td").first().get(0);t&&(e.selection.setAtEnd(t),e.selection.restore())}},removeFooter:function(){var a=A(),l=a.find("tfoot");if(0<l.length)if(a.find("tbody tr").length===0)Q();else if(l.remove(),0<T().length)k();else{e.popups.hide("table.edit");var t=a.find("tbody tr").first().find("td").first().get(0);t&&(e.selection.setAtEnd(t),e.selection.restore())}},setBackground:ve,showInsertPopup:function(){var a=e.$tb.find('.fr-command[data-cmd="insertTable"]'),l=e.popups.get("table.insert");if(l||(l=fe()),!l.hasClass("fr-active")){e.popups.refresh("table.insert"),e.popups.setContainer("table.insert",e.$tb);var t=e.button.getPosition(a),o=t.left,s=t.top;e.popups.show("table.insert",o,s,a.outerHeight())}},showEditPopup:k,showColorsPopup:ie,back:function(){0<T().length?k():(e.popups.hide("table.insert"),e.toolbar.showInline())},verticalAlign:function(a){e.$el.find(".fr-selected-cell").css("vertical-align",a)},horizontalAlign:function(a){e.$el.find(".fr-selected-cell").css("text-align",a)},applyStyle:function(a,l,t,o){if(0<l.length){if(e.opts.useClasses||(l.get(0).tagName==="TABLE"?function c(f,i){var n=f.childNodes;if(0<n.length)for(var p=0;p<n.length;p++)n[p].tagName==="TD"?i==="fr-dashed-borders"||i==="fr-highlighted"||i==="fr-thick"?Ce(n[p]):i==="fr-alternate-rows"&&n[p].style.removeProperty("background-color"):c(n[p],i)}(l.get(0),a):Ce(l.get(0))),!t){var s=Object.keys(o);s.splice(s.indexOf(a),1),l.removeClass(s.join(" "))}l.toggleClass(a)}},selectedTable:A,selectedCells:T,customColor:function(){var a=e.popups.get("table.colors").find(".fr-table-colors-hex-layer input");a.length&&ve(a.val())},selectCells:Y}},b.DefineIcon("insertTable",{NAME:"table",SVG_KEY:"insertTable"}),b.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),b.RegisterCommand("tableInsert",{callback:function(e,d,u){this.table.insert(d,u),this.popups.hide("table.insert")}}),b.DefineIcon("tableHeader",{NAME:"header",FA5NAME:"heading",SVG_KEY:"tableHeader"}),b.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,toggle:!0,callback:function(){this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]').hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var d=this.table.selectedTable();0<d.length&&(d.find("> thead").length===0?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),b.DefineIcon("tableFooter",{NAME:"table",FA5NAME:"table",SVG_KEY:"tableFooter"}),b.RegisterCommand("tableFooter",{title:"Table Footer",focus:!1,toggle:!0,callback:function(){this.popups.get("table.edit").find('.fr-command[data-cmd="tableFooter"]').hasClass("fr-active")?this.table.removeFooter():this.table.addFooter()},refresh:function(e){var d=this.table.selectedTable();0<d.length&&(d.find("tfoot").length===0?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),b.DefineIcon("tableRows",{NAME:"bars",SVG_KEY:"row"}),b.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below",delete:"Delete row"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',d=b.COMMANDS.tableRows.options;for(var u in d)d.hasOwnProperty(u)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="'+u+'" title="'+this.language.translate(d[u])+'">'+this.language.translate(d[u])+"</a></li>");return e+="</ul>"},callback:function(e,d){d=="above"||d=="below"?this.table.insertRow(d):this.table.deleteRow()}}),b.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90",SVG_KEY:"columns"}),b.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after",delete:"Delete column"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',d=b.COMMANDS.tableColumns.options;for(var u in d)d.hasOwnProperty(u)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'.concat(u,'" title="').concat(this.language.translate(d[u]),'">').concat(this.language.translate(d[u]),"</a></li>"));return e+="</ul>"},callback:function(e,d){d=="before"||d=="after"?this.table.insertColumn(d):this.table.deleteColumn()}}),b.DefineIcon("tableCells",{NAME:"square-o",FA5NAME:"square",SVG_KEY:"cellOptions"}),b.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',d=b.COMMANDS.tableCells.options;for(var u in d)d.hasOwnProperty(u)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'.concat(u,'" title="').concat(this.language.translate(d[u]),'">').concat(this.language.translate(d[u]),"</a></li>"));return e+="</ul>"},callback:function(e,d){d=="merge"?this.table.mergeCells():d=="vertical-split"?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,d){1<this.$el.find(".fr-selected-cell").length?(d.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled",!0),d.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled",!0),d.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled",!1)):(d.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled",!0),d.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled",!1),d.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled",!1))}}),b.DefineIcon("tableRemove",{NAME:"trash",SVG_KEY:"removeTable"}),b.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),b.DefineIcon("tableStyle",{NAME:"paint-brush",SVG_KEY:"tableStyle"}),b.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',d=this.opts.tableStyles;for(var u in d)d.hasOwnProperty(u)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'.concat(u,'" title="').concat(this.language.translate(d[u]),'">').concat(this.language.translate(d[u]),"</a></li>"));return e+="</ul>"},callback:function(e,d){this.table.applyStyle(d,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(e,d){var u=this.$,D=this.$el.find(".fr-selected-cell").closest("table");D&&d.find(".fr-command").each(function(){var N=u(this).data("param1"),K=D.hasClass(N);u(this).toggleClass("fr-active",K).attr("aria-selected",K)})}}),b.DefineIcon("tableCellBackground",{NAME:"tint",SVG_KEY:"cellBackground"}),b.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),b.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,d){this.table.setBackground(d)}}),b.DefineIcon("tableBack",{NAME:"arrow-left",SVG_KEY:"back"}),b.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){this.table.selectedCells().length!==0||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),b.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v",FA5NAME:"arrows-alt-v",SVG_KEY:"verticalAlignMiddle"}),b.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',d=b.COMMANDS.tableCellVerticalAlign.options;for(var u in d)d.hasOwnProperty(u)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'.concat(u.toLowerCase(),'" title="').concat(this.language.translate(d[u]),'">').concat(this.language.translate(u),"</a></li>"));return e+="</ul>"},callback:function(e,d){this.table.verticalAlign(d)},refreshOnShow:function(e,d){d.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active").attr("aria-selected",!0)}}),b.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left",SVG_KEY:"alignLeft"}),b.DefineIcon("align-left",{NAME:"align-left",SVG_KEY:"alignLeft"}),b.DefineIcon("align-right",{NAME:"align-right",SVG_KEY:"alignRight"}),b.DefineIcon("align-center",{NAME:"align-center",SVG_KEY:"alignCenter"}),b.DefineIcon("align-justify",{NAME:"align-justify",SVG_KEY:"alignJustify"}),b.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',d=b.COMMANDS.tableCellHorizontalAlign.options;for(var u in d)d.hasOwnProperty(u)&&(e+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'.concat(u,'" title="').concat(this.language.translate(d[u]),'">').concat(this.icon.create("align-".concat(u)),'<span class="fr-sr-only">').concat(this.language.translate(d[u]),"</span></a></li>"));return e+="</ul>"},callback:function(e,d){this.table.horizontalAlign(d)},refresh:function(e){var d=this.table.selectedCells(),u=this.$;d.length&&e.find("> *").first().replaceWith(this.icon.create("align-".concat(this.helpers.getAlignment(u(d[0])))))},refreshOnShow:function(e,d){d.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell").first())+'"]').addClass("fr-active").attr("aria-selected",!0)}}),b.DefineIcon("tableCellStyle",{NAME:"magic",SVG_KEY:"cellStyle"}),b.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',d=this.opts.tableCellStyles;for(var u in d)d.hasOwnProperty(u)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'.concat(u,'" title="').concat(this.language.translate(d[u]),'">').concat(this.language.translate(d[u]),"</a></li>"));return e+="</ul>"},callback:function(e,d){this.table.applyStyle(d,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(e,d){var u=this.$,D=this.$el.find(".fr-selected-cell").first();D&&d.find(".fr-command").each(function(){var N=u(this).data("param1"),K=D.hasClass(N);u(this).toggleClass("fr-active",K).attr("aria-selected",K)})}}),b.RegisterCommand("tableCellBackgroundCustomColor",{title:"OK",undo:!0,callback:function(){this.table.customColor()}}),b.DefineIcon("tableColorRemove",{NAME:"eraser",SVG_KEY:"remove"})})})();var Se=Xe.exports;const Ge=He(Se),Je=je({__proto__:null,default:Ge},[Se]);export{Je as t};
